<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learning Journal – Exercise 2.6</title>
    <style>
      :root {
        --primary-color: #20504b;
        --primary-hover-color: #1a403c;
        --secondary-color: #f4f4f4;
        --text-color: #333;
        --grid-item-bg-color: #2c3e50;
        --alt-grid-item-text-color: #0056b3;
        --customized-orange-light-bg: #b46100;
        --customized-orange-dark-bg: #ffa061;
      }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: "Lato", sans-serif; line-height: 1.6; color: var(--text-color); background-color: #d9e1e5; padding: 20px; }
      .container { max-width: 8.5in; margin: 0 auto; background: white; padding: 0.75in; box-shadow: 0 0 10px rgba(0,0,0,.1); }
      .page-header { background-color: var(--primary-color); color: #fff; padding: 20px; text-align: center; margin: -0.75in -0.75in 30px -0.75in; }
      .page-header h1 { color: #fff; border-bottom: none; margin-bottom: 5px; }
      h1 { color: var(--alt-grid-item-text-color); font-size: 28px; margin-bottom: 10px; border-bottom: 3px solid var(--primary-color); padding-bottom: 10px; }
      .header-info { color: #fff; font-size: 14px; line-height: 1.8; }
      .header-info strong { color: var(--customized-orange-dark-bg); }
      h2 { color: var(--alt-grid-item-text-color); font-size: 20px; margin-top: 30px; margin-bottom: 15px; padding-bottom: 5px; border-bottom: 2px solid var(--primary-color); }
      p { margin-bottom: 12px; text-align: justify; }
      ul, ol { margin-left: 25px; margin-bottom: 15px; }
      li { margin-bottom: 8px; }
      .toc { background-color: var(--secondary-color); border: 2px solid var(--primary-color); border-radius: 5px; padding: 20px 30px; margin: 25px 0 40px 0; }
      .toc h2 { margin-top: 0; border-bottom: none; color: var(--primary-color); }
      .toc ol { margin-left: 20px; counter-reset: item; list-style-type: none; }
      .toc li { counter-increment: item; margin-bottom: 8px; }
      .toc li:before { content: counter(item) ") "; font-weight: bold; color: var(--primary-color); }
      .toc a { color: var(--customized-orange-light-bg); text-decoration: none; font-weight: bold; }
      .toc a:hover { color: var(--primary-hover-color); text-decoration: underline; }
      .code-block { background-color: var(--secondary-color); border-left: 4px solid var(--primary-color); padding: 15px; margin: 15px 0; font-family: "Courier New", monospace; font-size: 13px; overflow-x: auto; border-radius: 3px; }
      .simple-box { background-color: var(--secondary-color); border: 2px solid var(--primary-color); border-radius: 5px; padding: 15px; margin: 20px 0; text-align: center; font-weight: bold; color: var(--primary-color); }
      .page-footer { background-color: var(--primary-color); color: #fff; padding: 1.5rem 2rem; text-align: center; font-size: 0.875rem; margin: 30px -0.75in -0.75in -0.75in; }
      .page-footer a { color: var(--customized-orange-dark-bg); font-weight: bold; text-decoration: none; }
      .page-footer a:hover { color: #fff; text-decoration: underline; }
      .page-footer .social-links { margin-bottom: 15px; }
      .page-footer .social-links a { margin: 0 10px; }
      hr { border: none; border-top: 2px solid var(--primary-color); margin: 30px 0; }
      .floating-nav { position: fixed; bottom: 25px; right: 25px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
      .floating-nav a { background-color: var(--primary-color); color: white; padding: 12px; border-radius: 50%; text-decoration: none; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,.2); transition: all .3s ease; font-size: 20px; text-align: center; width: 50px; height: 50px; line-height: 26px; }
      .floating-nav a:hover { background-color: var(--customized-orange-dark-bg); color: var(--primary-color); transform: translateY(-2px); }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h1>Learning Journal – Exercise 2.6</h1>
            <div class="header-info">
              <strong>Name:</strong> Ivan Cortes<br />
              <strong>Course:</strong> CareerFoundry – Python for Web Developers<br />
              <strong>Exercise:</strong> 2.6 – User Authentication in Django<br />
              <strong>Focus:</strong> Login/Logout, View Protection, GET vs POST.
            </div>
        </div>

        <div class="toc">
            <h2>Table of Contents</h2>
            <ol>
              <li><a href="#about">What This Exercise Was About</a></li>
              <li><a href="#done">What I Did (Step-by-Step)</a></li>
              <li><a href="#issues">Issues I Hit & Fixes</a></li>
              <li><a href="#skills">New Skills Acquired</a></li>
              <li><a href="#remember">What I’ll Remember</a></li>
              <li><a href="#next">What’s Next</a></li>
              <li><a href="#ai">AI Assistance Declaration</a></li>
            </ol>
        </div>

        <div id="about" class="section">
            <h2>What This Exercise Was About</h2>
            <p>
                Exercise 2.6 was about implementing a fundamental feature of most web applications: **user authentication**. The goal was to add a secure login and logout system to the Recipe App, ensuring that only registered and logged-in users could access the recipe list and detail pages. This is essential for protecting private content or enabling user-specific features.
            </p>
            <p>
                This involved leveraging Django's built-in authentication framework. Key tasks included creating views to handle login attempts (`login_view`) and logout actions (`logout_view`), along with a confirmation page (`logout_success_view`). We connected these views using URL routing, created corresponding HTML templates, and crucially, protected the existing recipe views using Django's `LoginRequiredMixin`. Understanding the difference between **GET** (viewing a page) and **POST** (submitting data) requests was essential for the login form functionality.
            </p>
        </div>

        <div id="done" class="section">
            <h2>What I Did (Step-by-Step)</h2>
            <ol>
                <li>
                    Created Authentication Views: In a new `recipe_project/views.py`, I defined `login_view`, `logout_view`, and `logout_success_view` using Django's authentication functions (`authenticate`, `login`, `logout`) and `AuthenticationForm`.
                </li>
                <li>
                    Configured Project URLs: In `recipe_project/urls.py`, I added paths for `/login/`, `/logout/`, and `/logout/success/`, linking them to the views created in Step 1 and assigning URL names (`name='login'`, etc.).
                </li>
                <li>
                    Created Authentication Templates: I created a new `templates/auth/` directory at the project root. Inside, I created `login.html` (displaying the `AuthenticationForm` and error messages) and `logout_success.html` (displaying a confirmation message and a link to log back in), styling them consistently with other pages.
                </li>
                <li>
                    Updated Settings: In `recipe_project/settings.py`, I added the `BASE_DIR / 'templates'` path to the `TEMPLATES['DIRS']` list so Django could find the new templates. I also added `LOGIN_URL = '/login/'` at the bottom to tell Django where to redirect unauthenticated users.
                </li>
                 <li>
                    Protected Recipe Views: In `recipes/views.py`, I imported `LoginRequiredMixin` from `django.contrib.auth.mixins` and added it as the first inherited class to both `RecipeListView` and `RecipeDetailView`.
                </li>
                <li>
                    Updated Existing Templates:
                    <ul>
                        <li>In `sales/templates/sales/recipes_home.html`, I added `{% if user.is_authenticated %}` logic to show either a "View Recipes" button (if logged in) or a "Login" button (if logged out).</li>
                        <li>In `recipes/templates/recipes/recipes_list.html` and `recipes_detail.html`, I added a "Logout" button linked to `{% url 'logout' %}` within the page header.</li>
                    </ul>
                </li>
                 <li>
                    Tested the Full Flow: I ran the server and tested: accessing `/recipes/` while logged out (redirected to login), logging in with incorrect credentials (saw error), logging in correctly (redirected to recipes list), viewing recipe details (logout button visible), logging out (redirected to success page), and using the "Log In Again" link.
                </li>
                 <li>
                    Captured Screenshots: I took the required four screenshots during the testing phase: `login_page.jpg`, `recipes_list_loggedin.jpg`, `recipe_detail_loggedin.jpg`, `logout_success_page.jpg`.
                 </li>
            </ol>
        </div>

        <div id="issues" class="section">
            <h2>Issues I Hit & Fixes</h2>
            <ul>
                <li>
                    **`NameError: name 'LoginRequiredMixin' is not defined`**: Occurred when trying to run the server after adding the mixin to `recipes/views.py`. **Fix:** I simply forgot to add the import statement `from django.contrib.auth.mixins import LoginRequiredMixin` at the top of `recipes/views.py`. Adding the import immediately resolved the error.
                </li>
                 <li>
                    **`RecursionError: maximum recursion depth exceeded`**: The server wouldn't start due to an infinite loop in URL includes. **Fix:** I had mistakenly added `path('recipes/', include('recipes.urls'))` inside `sales/urls.py`. An app's `urls.py` should only define its own paths, not include other apps. Removing this line from `sales/urls.py` and ensuring only the main `recipe_project/urls.py` included the apps fixed the loop.
                </li>
                 <li>
                    **`ImportError: cannot import name 'home' from 'sales.views'`**: This appeared after fixing the `RecursionError`. **Fix:** Discovered that the authentication code (`login_view`, etc.) was mistakenly placed in `sales/views.py` instead of `recipe_project/views.py`, overwriting the necessary `home` function. Moved the authentication code to the correct file and restored the `home` function in `sales/views.py`.
                </li>
                 <li>
                    **(Process Issue):** Encountered repetitive steps in the interactive guide. **Fix:** Requested a cache flush and restart of the guide, confirming the last successful step to reset context.
                </li>
            </ul>
        </div>

        <div id="skills" class="section">
            <h2>New Skills Acquired</h2>
            <ul>
                <li>Implementing a complete login/logout flow using Django's built-in authentication system.</li>
                <li>Using `AuthenticationForm`, `authenticate()`, `login()`, and `logout()` functions.</li>
                <li>Understanding the difference between GET and POST requests and how views handle them differently.</li>
                <li>Protecting Class-Based Views using `LoginRequiredMixin`.</li>
                <li>Configuring `LOGIN_URL` in `settings.py` for automatic redirects.</li>
                <li>Creating project-level templates and configuring `settings.py` to find them.</li>
                <li>Using the `user.is_authenticated` variable in templates for conditional rendering.</li>
                <li>Debugging common Django errors like `NameError`, `RecursionError`, and `ImportError` by reading tracebacks carefully.</li>
            </ul>
        </div>

        <div id="remember" class="section">
            <h2>What I’ll Remember</h2>
            <p>
                The most important takeaway is how easily Django integrates **authentication and authorization**. The `LoginRequiredMixin` is incredibly powerful – just adding it to a view instantly secures it. I also appreciate how Django separates concerns: the view handles the logic (checking passwords, creating sessions), the form handles data validation, and the template handles the presentation.
            </p>
            <p>
                Understanding the **request method (GET vs POST)** was also crucial. Seeing how the *same* `login_view` function behaves differently based on whether the user is just loading the page (GET) or submitting data (POST) really clarified how web forms work. Finally, the importance of correct file organization (project-level views vs app-level views, project-level templates vs app-level templates) was reinforced by the errors I encountered.
            </p>
        </div>

         <div id="next" class="section">
            <h2>What’s Next</h2>
            <p>
                With user authentication in place, the application is much more robust. The next logical step (Exercise 2.7) might involve leveraging the logged-in user, perhaps by allowing users to create their *own* recipes (requiring forms) or associating existing recipes with users. This exercise has laid the essential groundwork for building user-specific features.
            </p>
        </div>

        <div id="ai" class="section">
            <h2>AI Assistance Declaration</h2>
            <p>
                AI assistance was utilized as a technical resource to resolve challenges arising from outdated study materials, which can lead to issues with deprecated versions or component incompatibilities. In an environment with limited mentor availability, AI support was valuable for debugging, identifying logical errors, and refining code structure, including syntax and indentation.
            </p>
            <p>
                All code implementation, testing, and screenshot capture were performed manually by me following the guided steps. The repetitive errors encountered during the process highlight the importance of careful state management in interactive interactions with AI.
            </p>
        </div>

        <hr />
        <div class="simple-box">Exercise 2.6 Complete ✓ — User authentication implemented, views protected, testing successful.</div>

        <div class="page-footer">
            <div class="social-links">
              <a href="https://ivan-cortes-portfolio-v1.onrender.com/" target="_blank">Portfolio</a>
              <a href="https://www.linkedin.com/in/ivan-cortes-murcia-22053953/" target="_blank">LinkedIn</a>
              <a href="https://x.com/IVENCOMUR" target="_blank">Twitter</a>
              <a href="https://github.com/ivencomur" target="_blank">GitHub</a>
            </div>
            <p><a href="https://github.com/ivencomur/recipe-app" target="_blank">Project Repository</a></p>
            <p>Python for Web Developers @ CareerFoundry 2025</p>
        </div>
    </div>

    <div class="floating-nav">
        <a href="../index.html" title="Go to Main Index">🏠</a> <!-- Assumes index.html is one level up -->
        <a href="javascript:history.back()" title="Go Back">⬅️</a>
    </div>
</body>
</html>
